по поводу конфигурации посов...

инициализация:
берём список башен корпы;
по очереди берём список структур не в ангаре в системе, совпадающей с башней;
 - если башня там одна - приписываем все структуры к этой башне;
 - если башен несколько - конфигурировать вручную;

таблица структур посов:
recordId			guid
userId				long
itemId				long	//id структуры в списке assets
parentId			long	//id башни поса, к которому относится структура
locationId			long	//id солнечной системы
typeId				long	//тип структуры
containedTypeId		long	//тип ресурса внутри структуры (для сило)
startTimeStamp		datetime	//время запуска работы
consumptionPerHour	long	//потребление ресурса в час, - если ресурс добавляется, + если убавляется

дополнительно:
вместимость структуры (сило) берётся из таблицы invTypes
объём 1 единицы ресурса берётся из invTypes

текущий уровень топлива рассчитывается как и раньше, кроме cpu/powergrid, эти в зависимости от конфига;

после обновления списка assets:
выбрать башню из списка посов,
 выбрать структуры из этой же системы из списка assets,
 выбрать структуры от этой башни из списка структур,
 сверить их, что новое - добавить, что исчезло - удалить,
 
ручная конфигурация состоит в назначении структуре принадлежности к конкретному посу, либо удалении её из поса



2008.01.10 15:30:15 - stamp

2008.01.15 16:24:28 - 1
2008.01.15 16:50:42 - 2

